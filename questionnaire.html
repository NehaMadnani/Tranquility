<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sophisticated Quiz</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #dcecf2;
            color: #000;
        }

        header {
            background-color: #3498db;
            color: #fff;
            text-align: center;
            padding: 1em 0;
        }

        .nav-tabs {
            background-color: #3498db;
            border: none;
            margin-bottom: 20px;
        }

        .nav-link {
            color: #fff;
        }

        .nav-link.active {
            background-color: #2980b9;
            color: #fff;
        }

        .question {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .options {
            flex-direction: column;
        }

        input[type="radio"] {
            margin-bottom: 5px;
        }

        button {
            padding: 10px 30px;
            background-color: #333;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        progress {
            width: 100%;
            margin-top: 20px;
        }
        .nav .nav-tabs {
            margin: 10px;
        }
        section {
            padding-left: 10px;
        }
    </style>
</head>
<body>

    
    <section>
        <header>
            <h1>Tranquility Quiz</h1>
        </header>

        <div>
            On a scale of 1 to 5, please indicate how often you have been bothered by the following over the past two weeks:
        </div>
    
        <ul class="nav nav-tabs">
            <li class="nav-item">
                <a class="nav-link active" data-toggle="tab" href="#nav1">Question 1</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#nav2">Question 2</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#nav3">Question 3</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#nav4">Question 4</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#nav5">Question 5</a>
            </li>
        </ul>

        <div class="tab-content">
            <div id="nav1" class="tab-pane fade show active">
                <p class="question">Little interest or pleasure in doing things:</p>
                <div class="options">
                    <input type="radio" name="q1" value="1"> 1<br>
                    <input type="radio" name="q1" value="2"> 2<br>
                    <input type="radio" name="q1" value="3"> 3<br>
                    <input type="radio" name="q1" value="4"> 4<br>
                    <input type="radio" name="q1" value="5"> 5<br>
                </div>
                <button onclick="nextQuestion('nav2')">Next</button>
            </div>

            <div id="nav2" class="tab-pane fade">
                <p class="question">Feeling down, depressed, or hopeless:</p>
                <div class="options">
                    <input type="radio" name="q2" value="1"> 1<br>
                    <input type="radio" name="q2" value="2"> 2<br>
                    <input type="radio" name="q2" value="3"> 3<br>
                    <input type="radio" name="q2" value="4"> 4<br>
                    <input type="radio" name="q2" value="5"> 5<br>
                </div>
                <button onclick="nextQuestion('nav3')">Next</button>
            </div>

            <div id="nav3" class="tab-pane fade">
                <p class="question">Feeling nervous, anxious, or on edge: </p>
                <div class="options">
                    <input type="radio" name="q3" value="1"> 1<br>
                    <input type="radio" name="q3" value="2"> 2<br>
                    <input type="radio" name="q3" value="3"> 3<br>
                    <input type="radio" name="q3" value="4"> 4<br>
                    <input type="radio" name="q3" value="5"> 5<br>
                </div>
                <button onclick="nextQuestion('nav4')">Next</button>
            </div>

            <div id="nav4" class="tab-pane fade">
                <p class="question">Not being able to stop or control worrying:</p>
                <div class="options">
                    <input type="radio" name="q4" value="1"> 1<br>
                    <input type="radio" name="q4" value="2"> 2<br>
                    <input type="radio" name="q4" value="3"> 3<br>
                    <input type="radio" name="q4" value="4"> 4<br>
                    <input type="radio" name="q4" value="5"> 5<br>
                </div>
                <button onclick="nextQuestion('nav5')">Next</button>
            </div>

            <div id="nav5" class="tab-pane fade">
                <p class="question">Thoughts that you would be better off dead or of hurting yourself in some way:</p>
                <div class="options">
                    <input type="radio" name="q5" value="1"> 1<br>
                    <input type="radio" name="q5" value="2"> 2<br>
                    <input type="radio" name="q5" value="3"> 3<br>
                    <input type="radio" name="q5" value="4"> 4<br>
                    <input type="radio" name="q5" value="5"> 5<br>
                </div>
                <button onclick="showResults()">Finish</button>
            </div>
        </div>

        <progress id="progress" value="20" max="100"></progress>
    </section>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.min.js"></script>

    <script>
        // hardcoded user id and moodscore values for first call
        function nextQuestion(nextNav) {
            var section = document.getElementById(nextNav);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth' });
            }
            document.getElementById('progress').value += 20;
        }

        function showResults() {
            // Mapping numeric values to answers

                var totalMoodScore;
                const ans1 = document.querySelector('input[name="q1"]:checked').value;
                const ans2 = document.querySelector('input[name="q2"]:checked').value;
                const ans3 = document.querySelector('input[name="q3"]:checked').value;
                const ans4 = document.querySelector('input[name="q4"]:checked').value;
                const ans5 =  document.querySelector('input[name="q5"]:checked').value;
                totalMoodScore = ans1+ans2+ans3+ans4+ans5;
            data = {
                "userid": 2,
                "moodscore": 5,
                "stresslevel": 3,
                "sleepquality": 4
            }

        //     // Sending a POST request to the API
        //     fetch('http://localhost:3000/questionnaire', {
        //     method: 'POST', // The method is POST since you are sending data
        //     headers: {
        //         'Content-Type': 'application/json', // Specifying the content type as JSON
        //     },
        //     body: JSON.stringify({ // Converting the data object to a JSON string
        //         userid: 2,
        //         moodscore: 5,
        //         stresslevel: 3,
        //         sleepquality: 4,
        //         question1: ans1,
        //         question2: ans2,
        //         question3: ans3,
        //         question4: ans4,
        //         question5: ans5
        //     })
        // })
        // .then(response => response.json()) // Parsing the JSON response
        // .then(data => console.log(data)) // Handling the data from the response
        // .catch(error => console.error('Error:', error)); // Handling any errors
        if (totalMoodScore < 10 ) {
            window.user_profile = { 7: 3}
        } else {
            window.user_profile = { 12: 3}
        }
        console.log(totalMoodScore);
         //{12:3}  Exercise // If score<=10
        // {7:3}  Relaxing // If score>10
        // window.user_profile = { 3: 10 };

        // Redirecting to 'video-player.html' with user_profile as a query parameter
        window.location.href = 'video-player.html?user_profile=' + encodeURIComponent(JSON.stringify(window.user_profile));
        }
    </script>

</body>
</html>
